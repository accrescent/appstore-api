// Copyright 2024 Logan Magee
//
// SPDX-License-Identifier: MPL-2.0

syntax = "proto3";

package accrescent.appstore.v1;

import "accrescent/appstore/v1/get_app_download_info_request.proto";
import "accrescent/appstore/v1/get_app_download_info_response.proto";
import "accrescent/appstore/v1/get_app_listing_request.proto";
import "accrescent/appstore/v1/get_app_listing_response.proto";
import "accrescent/appstore/v1/get_app_package_info_request.proto";
import "accrescent/appstore/v1/get_app_package_info_response.proto";
import "accrescent/appstore/v1/get_app_update_info_request.proto";
import "accrescent/appstore/v1/get_app_update_info_response.proto";
import "accrescent/appstore/v1/list_app_listings_request.proto";
import "accrescent/appstore/v1/list_app_listings_response.proto";

option java_multiple_files = true;
option java_package = "app.accrescent.appstore.v1";

// Service providing RPCs for querying all Accrescent apps.
service AppService {
  // Retrieves a single app's listing.
  //
  // The following status codes have defined meanings:
  //
  // - INVALID_ARGUMENT: the request parameters are invalid
  // - NOT_FOUND: an app with the provided ID could not be found
  rpc GetAppListing(GetAppListingRequest) returns (GetAppListingResponse);

  // Retrieves a list of unique app listings.
  rpc ListAppListings(ListAppListingsRequest) returns (ListAppListingsResponse);

  // Retrieves an app's package information.
  //
  // The following status codes have defined meanings:
  //
  // - INVALID_ARGUMENT: the request parameters are invalid
  rpc GetAppPackageInfo(GetAppPackageInfoRequest) returns (GetAppPackageInfoResponse);

  // Retrieves an app's download information.
  //
  // The following status codes have defined meanings:
  //
  // - INVALID_ARGUMENT: the request parameters are invalid
  // - NOT_FOUND: an app with the provided ID could not be found
  // - FAILED_PRECONDITION: the app is incompatible with the specified device
  rpc GetAppDownloadInfo(GetAppDownloadInfoRequest) returns (GetAppDownloadInfoResponse);

  // Retrieves an app's update information.
  //
  // The following status codes have defined meanings:
  //
  // - INVALID_ARGUMENT: the request parameters are invalid
  // - NOT_FOUND: an app with the provided ID could not be found
  // - FAILED_PRECONDITION: the app is incompatible with the specified device
  rpc GetAppUpdateInfo(GetAppUpdateInfoRequest) returns (GetAppUpdateInfoResponse);
}
